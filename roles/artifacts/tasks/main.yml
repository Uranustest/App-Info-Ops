---
- name: get artifacts from s3
  aws_s3:
    bucket: "{{ ARTIFACT_S3BUCKET }}"
    object: "{{ ARTIFACT_ID }}-{{ ARTIFACT_VERSION }}"
    dest: "{{ ARTIFACT_DIR }}"
    mode: get

- name: unarchive artifact dir
  unarchive:
    src: "{{ home_dir }}/{{ artifacts }}"
    dest: "{{ home_dir }}"
    remote_src: "{{ is_source_is_remote }}"
    extra_opts:
      - --strip-components=1

- name: starting tomcat
  shell: "nohup sh catalina.sh run &"
  args:
    chdir: "{{ artifact_dir }}/bin"